#!/usr/bin/env bash
set -euo pipefail

# Allow skipping with env var
if [[ "${SKIP_E2E:-}" == "1" ]]; then
  echo "[pre-push] SKIP_E2E=1 -> E2Eをスキップします"
  exit 0
fi

echo "[pre-push] PlaywrightスモークE2Eを実行します…"

# Use a lightweight smoke suite to keep pushes quick
npm run --silent test:e2e:smoke

echo "[pre-push] E2E成功。pushを続行します。"